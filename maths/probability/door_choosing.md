# 选门问题

## 问题

台上有三个门，一个后边有汽车，其余后边是山羊。主持人让你任意选择其一，然后他打开其余两个门中的一个，你看到是山羊。这时，他给你机会让你可以重选，也就是你可以换选另一个剩下的门。那么你换不换？

## 分析

为叙述方便，三个门编号为 $1$, $2$, $3$, $C$ 代表车，$T$ 代表主持人。$C_i$ 表示车在 $i$ 号门，$T_i$ 则表示主持人打开了 $i$ 号门。如果车是随意放到各个门后的，则 $C_1$, $C_2$, $C_3$ 的概率各为 $\frac 1 3$, 记为：

$$
P(C_1) = P(C_2) = P(C_3) = \frac 1 3
$$ (do1)

观众选 $1$, $2$, $3$ 的情况可以作相同的分析。不妨设观众选择门 $1$, 随后可以分两种情况分析。

1. 在主持人事先知道车在哪个门后而故意选择没车的门的情况下：

$$
\begin{split}
P(T_3|C_2) = P(T_2|C_3) &= 1 \\
P(T_2|C_2) = P(T_3|C_3) &= 0 \\
P(T_2|C_1) = P(T_3|C_1) &= \frac 1 2
\end{split}
$$ (do2)

{eq}`do2` 中第 3 式成立是因为我们假定如果车在门 $1$, 主持人以相等的概率选择门 $2$ 或 $3$.

于是可得：

$$
\begin{split}
P(T_2C_3) = P(T_2|C_3) P(C_3) &= \frac 1 3 \\
P(T_3C_2) = P(T_3|C_2) P(C_2) &= \frac 1 3 \\
P(T_2C_1) = P(T_2|C_1) P(C_1) &= \frac 1 6 \\
P(T_3C_1) = P(T_3|C_1) P(C_1) &= \frac 1 6
\end{split}
$$ (do3)

首先求主持人打开的门后没有车的概率，记为 $P(N)$：

$$
P(N) = P(T_2C_1) + P(T_2C_3) + P(T_3C_1) + P(T_3C_2) = 1
$$ (do4)

从前提来看也显然应该是 $1$, 于是在此事件已发生的前提下，另一个门有车的概率为：

$$
\frac {P(T_3C_2) + P(T_2C_3)} {P(N)} = \frac 2 3
$$ (do5)

而此前提下 $C_1$ 的概率：

$$
\frac {P(T_3C_1) + P(T_2C_1)} {P(N)} = \frac 1 3
$$ (do6)

所以换了得到车的概率将是不换时的两倍。

2. 在主持人随便打开剩下的一个门的情况下：

$$
\begin{split}
P(T_2|C_1) = P(T_3|C_1) &= \frac 1 2 \\
P(T_2|C_2) = P(T_3|C_2) &= \frac 1 2 \\
P(T_2|C_3) = P(T_3|C_3) &= \frac 1 2
\end{split}
$$ (do7)

因此

$$
\begin{split}
P(T_2C_1) = P(T_2|C_1) P(C_1) &= \frac 1 6 \\
P(T_3C_1) = P(T_3|C_1) P(C_1) &= \frac 1 6 \\
P(T_2C_2) = P(T_2|C_2) P(C_2) &= \frac 1 6 \\
P(T_3C_2) = P(T_3|C_2) P(C_2) &= \frac 1 6 \\
P(T_2C_3) = P(T_2|C_3) P(C_3) &= \frac 1 6 \\
P(T_3C_3) = P(T_3|C_3) P(C_3) &= \frac 1 6
\end{split}
$$ (do8)

同样先算：

$$
P(N) = P(T_2C_1) + P(T_2C_3) + P(T_3C_1) + P(T_3C_2) = \frac 2 3
$$ (do9)

在此事件已发生的前提下，另一个门有车的概率：

$$
\frac {P(T_3C_2) + P(T_2C_3)} {P(N)} = \frac 1 2
$$ (do10)

$C_1$ 的概率是：

$$
\frac {P(T_3C_1) + P(T_2C_1)} {P(N)} = \frac 1 2
$$ (do11)

关于这个问题的两个误区：

一是认为主持人的选择不影响车的分布概率，这其实是主持人随便打开一个门的情况。在第一种情况下，主持人的选择行为虽然没有改变车的分布概率，但他选择哪个门与车的分布不是无关的，所以改变了车的分布的条件概率。从信息论的角度来看，主持人的选择无疑透露了一些信息，使得剩下的关于车的分布情况的信息量减少了。换个角度讲，前者的样本空间不包括“主持人打开的门后有车”这种情况，而后者则包括了。

二是认为主持人是故意还是随意不影响车的条件概率，既然“无车”这种事情发生了，则另一个门中有车的概率就定了。这种观点其实是没有清楚的理解概率的含义。在概率论里，“某时某刻某地主持人打开的门后无车”和“主持人打开的门后无车”显然不是同一个事件，前一个甚至不是事件。
